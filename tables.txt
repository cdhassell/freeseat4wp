
CREATE TABLE booking (
  id int(10) NOT NULL AUTO_INCREMENT,
  seat int(10) NOT NULL DEFAULT '0',
  state int(2) NOT NULL DEFAULT '0',
  cat int(2) NOT NULL DEFAULT '0',
  firstname varchar(128) NOT NULL DEFAULT '',
  lastname varchar(128) NOT NULL DEFAULT '',
  email varchar(128) DEFAULT NULL,
  phone varchar(128) DEFAULT NULL,
  `timestamp` datetime DEFAULT NULL,
  payment int(2) NOT NULL DEFAULT '0',
  groupid int(10) DEFAULT NULL,
  showid int(10) NOT NULL DEFAULT '0',
  address varchar(255) DEFAULT NULL,
  postalcode varchar(15) DEFAULT NULL,
  city varchar(127) DEFAULT NULL,
  us_state varchar(2) DEFAULT NULL,
  country varchar(2) DEFAULT NULL,
  notes varchar(255) DEFAULT NULL,
  expiration datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  contact_id int(11) NOT NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE IF NOT EXISTS ccard_transactions (
  numxkp varchar(18) NOT NULL DEFAULT '',
  groupid int(9) NOT NULL DEFAULT '0',
  amount int(6) DEFAULT NULL,
  PRIMARY KEY (numxkp)
) ;

CREATE TABLE class_comment (
  spectacle int(7) NOT NULL DEFAULT '0',
  class int(2) NOT NULL DEFAULT '0',
  `comment` varchar(64) DEFAULT NULL,
  description varchar(64) DEFAULT NULL,
  UNIQUE KEY spectacle (spectacle,class)
) ;

CREATE TABLE config (
  id int(3) NOT NULL AUTO_INCREMENT,
  max_seats int(9) NOT NULL DEFAULT '0',
  paydelay_ccard int(9) NOT NULL DEFAULT '0',
  closing_ccard int(9) NOT NULL DEFAULT '0',
  shakedelay_ccard int(9) NOT NULL DEFAULT '0',
  disabled_ccard int(1) NOT NULL DEFAULT '0',
  paydelay_post int(9) NOT NULL DEFAULT '0',
  closing_post int(9) NOT NULL DEFAULT '0',
  shakedelay_post int(9) NOT NULL DEFAULT '0',
  disabled_post int(1) NOT NULL DEFAULT '0',
  opening_cash int(9) NOT NULL DEFAULT '0',
  closing_cash int(9) NOT NULL DEFAULT '0',
  disabled_cash int(1) NOT NULL DEFAULT '0',
  take_down int(11) NOT NULL DEFAULT '0',
  take_down_text varchar(255) NOT NULL DEFAULT '',
  groupdiscount int(10) unsigned NOT NULL DEFAULT '0',
  groupdiscount_min int(10) unsigned DEFAULT '0',
  PRIMARY KEY (id)
) ;

CREATE TABLE postpay_keys (
  randkey int(10) unsigned NOT NULL DEFAULT '0',
  email varchar(254) NOT NULL DEFAULT '',
  expiration datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (randkey)
) ;

CREATE TABLE price (
  spectacle int(7) DEFAULT NULL,
  cat int(2) DEFAULT NULL,
  class int(3) DEFAULT NULL,
  price int(11) DEFAULT NULL,
  KEY spectacle (spectacle,cat,class)
) ;

CREATE TABLE seats (
  id int(10) NOT NULL AUTO_INCREMENT,
  theatre int(7) NOT NULL DEFAULT '0',
  `row` varchar(5) NOT NULL DEFAULT '',
  col varchar(5) NOT NULL DEFAULT '',
  extra varchar(64) DEFAULT NULL,
  zone varchar(32) DEFAULT NULL,
  class int(3) NOT NULL DEFAULT '0',
  x int(3) NOT NULL DEFAULT '0',
  y int(3) NOT NULL DEFAULT '0',
  PRIMARY KEY (id)
) ;

CREATE TABLE seat_locks (
  seatid int(10) NOT NULL DEFAULT '0',
  showid int(10) NOT NULL DEFAULT '0',
  sid varchar(50) NOT NULL DEFAULT '0',
  `until` int(10) DEFAULT NULL,
  PRIMARY KEY (seatid,showid)
) ;

CREATE TABLE shows (
  id int(10) NOT NULL AUTO_INCREMENT,
  spectacle int(7) DEFAULT NULL,
  theatre int(7) DEFAULT NULL,
  `date` date DEFAULT NULL,
  `time` time DEFAULT NULL,
  disabled int(1) NOT NULL DEFAULT '0',
  civicrm_id int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE spectacles (
  id int(7) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) DEFAULT NULL,
  imagesrc varchar(64) DEFAULT NULL,
  description text,
  castpw varchar(64) DEFAULT NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE theatres (
  id int(7) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) DEFAULT NULL,
  imagesrc varchar(64) DEFAULT NULL,
  staggered_seating int(1) DEFAULT '0',
  PRIMARY KEY (id)
) ;


// output a block with general information about the process
// TODO perhaps should not be hard coded, and replaced with a user-defined text widget
do_hook( 'front_page_public' );
/* $out .= 
	'<table style="border: 1px solid #adcde0; background-color: #f1f3f4;">
		<tr>
		  <td style="vertical-align: top;"><!-- class="showlist"-->
		    <div id="speciallist">
		    <h3 class="centered">It\'s Easy</h3>
		    <p>In order to purchase tickets online, you will need two things:</p>
		    <ol>
		    <li><h5>A Credit or Debit Card</h5>
		    <p>A way to pay for the tickets on <b>Paypal</b>, such as a credit card,
debit card or checking account number.&nbsp; You don\'t need a Paypal
account, but can use your Paypal account if you have one.<br>
		    <table><td><i><b>We Accept &nbsp;</b></i></td>
		      <td>
		      <a href="#" onclick="javascript:window.open(\'https://www.paypal.com/us/cgi-bin/webscr?cmd=xpt/cps/popup/OLCWhatIsPayPal-outside\',\'olcwhatispaypal\',\'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=400, height=350\');"><img  src="https://www.paypal.com/en_US/i/bnr/horizontal_solution_PPeCheck.gif" border="0" alt="Solution Graphics"></a>
		      </td>
		    </table></p></li>
		    <li><h5>A Working Printer</h5>
		    <p>A working <b>printer</b> to print your tickets.&nbsp; Any
ordinary printer will be fine.&nbsp; Make sure to bring this piece of
paper to the show.
		    <table><td><i><b>Print Your Own Tickets &nbsp;&nbsp;</b></i></td>
		      <td><img src="wp-content/plugins/freeseat/printer128b.png" alt="Printer icon"></td>
		    </table></p></li>
		    </ol>
		    </div>
		  </td>    
		  <td style="vertical-align: top;">
		    <div style="margin: 0; width:300px;">
		    <div id="notes">
		    	<div style="text-align: center; margin: 0;">
		    		<h4>Menu</h4>
		    	</div>
		    <div id="navigation" class="centered"><!--begin div.navigation -->      
		    <ul>
		    	<li><a href="plugins/remail/index.php" title="Print your ticket page again">Reprint My Tickets</a></li>
		    	<li><a href="plugins/postpay/index.php" title="Pay for any unpaid reservations">Make a Payment</a></li>
		    </ul></div><!-- end of div.navigation -->
		    <div style="text-align: center; margin: 1em 0 1em 0;">
		    	<h4>Also note</h4>
		    </div>
		    <ul>
		    	<li><p>If you are ordering tickets for a group of 15 or more, we will now automatically apply your group discount online. </p></li>
		    	<li><p>If you lose your ticket page, use the "Replace Lost Tickets" link to print another copy.</p></li>
		    	<li><p>Looking for information about show <i><b>auditions</b></i>? &nbsp;Visit our <a href="http://www.hbg-cpac.org">main web site</a> for more information.</p></li>
		    </ul>
		    </div>
		    </div>
		  </td>
		</tr>
	</table>
	</div>';
*/
	
	
